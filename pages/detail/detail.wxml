<!-- detail.wxml -->
<!-- detail.wxml -->
<import src="/components/loadding/loadding.wxml" />

<template is='loadding' wx:if="{{!showLoadding}}"/>




<view>
	<scroll-view wx:if="{{entity.type == 'wxArticle'}}" scroll-y style="height:100%;position: absolute;" bindscroll="recordUserscroll"
	 enable-back-to-top="true">
	 <view wx:for="{{nodes}}" wx:key="{{index}}" wx:for-item="node">
           
		<rich-text class="_root" wx:if="{{nodes.type === undefined}}"  nodes="{{[node]}}"></rich-text>
	</view>



	</scroll-view>






	<!-- 悬浮部分 -->
	<form name='pushMsgFm' report-submit="{{reportSubmit}}" bindsubmit='getFormID'>
		<button form-type="submit" class="btnForm">
			<view class="fixed {{isShow?'show':''}} state1">
				<view class="floatShadow"></view>
				<view class="boxFloat" style="{{isIphoneX?'height:100rpx':'height:100rpx'}}">
					<view class="btnBoxKonw" style="flex:4;"></view>
					<button class="btnBox btnCollect" style='flex:1' catchtap="handleLikeButtonTapped" form-type="submit" data-item="like" bindgetuserinfo="handleAuthor"
					 open-type="{{type}}" style="{{isIphoneX? 'height:100rpx;': 'height:100rpx'}} ">
						<image class="imgBtn " src="{{isLike? baseImageUrlAllStar:( '/images/star.png')}} "></image>
						<view class="letter ">收藏</view>
					</button>
					<text class="borderLeft"></text>

					<button class="btnBox btnShareFriend" style='flex:1.5' open-type="{{type1}}" data-item="share" form-type="submit" bindgetuserinfo="handleAuthor"
					 style="{{isIphoneX? 'height:100rpx': 'height:100rpx'}} ">
						<image class="imgBtn " src="{{shareButton}} "></image>
						<view class="letter ">分享好友</view>
					</button>
					<text class="borderRight"></text>
					<button class="btnBox " style='flex:2' open-type="{{type}} " form-type="submit " data-item="poster" bindgetuserinfo="handleAuthor "
					 catchtap="handlePoster" style="{{isIphoneX? 'height:100rpx': 'height:100rpx'}}; ">
						<image class="imgBtn " src="/images/circle.png"></image>
						<view class="letter ">分享海报</view>
					</button>
				</view>
				<view class="{{isIphoneX?'bol':''}}  "></view>
			</view>
			
		</button>
	</form>
</view>
<!-- 悬浮回到首页 -->
<form name='pushMsgFm' report-submit="{{reportSubmit}} " bindsubmit='getFormID' wx:if="{{isRoot}} ">
	<button form-type="submit " class="btnForm ">
		<image src="{{baseImageUrlHome}}" class="{{isRoot? 'goHomeStyle': 'goHomeStyle1'}} state1 " bindtap="handleBack "></image>
	</button>
</form>
<!-- 生成海报 -->
<view wx:if="{{isShowPoster}}" class="posterBox" bindtap="handleSavePicture ">
	<canvas class="canvas" canvas-id="shareCanvas" bindlongtap="handleSavePictureToCamera"></canvas>
	<button bindopensetting="handleSavePicture" open-type="{{saveToCamera}} " class="btnSavePicture " style="z-index:99 ">{{btnSavePitcureLetter}}</button>
</view>


<!-- 悬浮的音频 后期作品 -->
<view wx:if="{{entity.type=='wxArticle' && entity.wxmpVoiceIds.length>0 && isShowListen}}" class="audioBox">
	<view class="coverBox" wx:if="{{entity.type === 'wxArticle' && isPlay === false  && isChangeBig === false }}" style="{{isIphoneX?'bottom:250rpx':'bottom:200rpx'}}">

		<button class="btnBox btnBg" style='flex:2' open-type="{{type}}" bindtap="handleAuthorToPlay" bindgetuserinfo="handleAuthor">
			<image src="/images/listen.png" style="width:116rpx;height:108rpx" />
		</button>
	</view>
	<view class="coverBox" wx:if="{{entity.type === 'wxArticle' && isPlay === true && isChangeBig === false}}" style="{{isIphoneX?'bottom:250rpx':'bottom:200rpx'}}">
		<button class="btnBox btnBg" style='flex:2' open-type="{{type}}" bindtap="handleAuthorToPause" bindgetuserinfo="handleAuthor">
			<image src="/images/pause.png" style="width:116rpx;height:108rpx" />
		</button>

	</view>
	<view class="shinkBoxTrue" wx:if="{{entity.type === 'wxArticle' && isChangeBig === true}}" style="{{isIphoneX?'bottom:156rpx':'bottom:100rpx'}}">
		<view class="shinkBox" bindtap="handleShink">
			<text class="shink">收起 </text>
		</view>

		<view class="audioTitleBox">
			<view class="audioTitle">{{entity.title}}</view>
			<view>
				<slider style="margin:0" blockSize="12" max="{{totalTime}}" backgroundColor="#747474" activeColor="#fff" block-color="#ffd700"
				 bindchanging="handleChanging" min="0" value="{{currentTime}}" block-size="18"></slider>
			</view>
			<view style="height:30rpx;font-size:20rpx;color:#fff;line-height:16rpx;margin-left:-50rpx;">
				<text style="float:left;margin-left:50rpx">{{currentProgress}} </text>
				<text style="float:right;">{{totalProgress}} </text>
			</view>


		</view>

		<view class="audioBoxImg">

			<image wx:if="{{isPlay}}" src="/images/pauseLine.png" class="pauseImgNow" bindtap="handlePauseVideoNow" />

			<image wx:else class="playImg" src="/images/playing.png" bindtap="handlePlayVideoNow" />
			<view class="playLetter" bindtap="handlePlayVideoNow">听一听 </view>
		</view>
	</view>
</view>
