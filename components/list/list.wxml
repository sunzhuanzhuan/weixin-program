<template name="list">
    <block wx:if="{{list.length>0}}">

        <!-- 推荐页的文章 -->

            <swiper previous-margin="50rpx" next-margin="50rpx" current="1" circular="true" style="margin-top:50rpx">
                <block wx:for="{{imgUrls}}">
                    <swiper-item style="text-align:center;width:600rpx;height:300rpx;">
                        <image style="width:600rpx;height:300rpx" src="{{item}}" width="600rpx" height="300rpx"/>
                    </swiper-item>
                </block>
            </swiper>




















    <view bind:touchstart="handleTouchStart"
            bind:touchend="handleTouchEnd">

        <view wx:for="{{list}}" class="container" wx:key="{{index}}" style="overflow:hidden;{{index==0?'margin-top:20rpx':''}}">
            <!-- 视频 -->
            <view wx:if="{{item.type === 'txvVideo'}}" class="itemBigBox">
                <view wx:if='{{currentindex == index }}' data-item="{{item}}" data-currentIndex='{{index}}'>
                    <txv-video vid="{{item.txvVid}}" playerid="{{item.txvVid}}video" autoplay="{{isVideo}}"></txv-video>
                </view>
                <view wx:else data-currentIndex='{{index}}' data-item="{{item}}"  style="position:relative;" bindtap='changeVideo'>
                    <image src='/images/play.png' style="width:132rpx;height:132rpx;position:absolute;top:50%;left:50%;margin-top:-66rpx;margin-left:-66rpx" />
                    <image style="width:690rpx;height:400rpx;display:block;border-radius:8rpx 8rpx 0 0" src="http://puui.qpic.cn/vpic/0/{{item.txvVid}}.png/0"></image>
                </view>
                <view style="background:#ffffff;height:100rpx;width:690rpx;">
                    <view class="videoTitle" data-id="{{item.id}}" bindtap="handleDetail" style="display:inline-block;line-height:88rpx;padding-left:30rpx">
                        {{item.title}}
                    </view>
                    <view data-id="{{item.id}}" style="float:right;width:250rpx">
                        <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                            <button  form-type="submit" class='btnStarVideo' catchtap="handleLikeButtonTapped" form-type="submit" data-liked="{{item.liked}}" data-id="{{item.id}}" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}">
                                <image class="imgBtnItem" src="{{item.liked?'/images/mini_star.gif':'/images/star.png'}}"></image>
                                <text style="color:#999;font-size:24rpx;padding-left:10rpx;display:inline-block;line-height:12rpx;height: 100rpx;">
                                    {{item._likedTimes}}
                                </text>
                            </button>
                        </form>
                        <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                            <button  form-type="submit" class='btnShareVideo' open-type="{{type1}}" data-item="share" form-type="submit" bindgetuserinfo="handleAuthor">
                                <image class="imgBtnItem" src="/images/mini_share.gif"></image>
                            </button>
                        </form> 
                    </view>
                </view>
            </view> 
            <view  wx:if="{{item.type === 'wxArticle'}}">
                <!-- 文章 -->
                <view wx:if="{{!(item.wxMidVec && item.wxMidVec[item.wxMidVec.length-1] == '1')}}" style="background:#f3eeef;{{list[index-1].wxMidVec && list[index-1].wxMidVec[list[index-1].wxMidVec.length-1] == '1'?'margin-top:15rpx':''}};{{(list[index+1].wxMidVec && list[index+1].wxMidVec[list[index+1].wxMidVec.length-1] == '1')?'margin-bottom:15rpx':''}}">
                    <view style="width:100%;overflow:hidden;background:#ffffff;">
                        <!-- 小的图片的文章 -->
                        <view class="itemSmall" style="float:right;{{(list[index+1].wxMidVec && list[index+1].wxMidVec[list[index+1].wxMidVec.length-1] == '1')?'':'border-bottom: 1px solid #E0E0E0;'}}">
                            <image style="float:right;width:220rpx;height:180rpx;" mode="aspectFill" src="{{item.coverUrl}}" bindtap="handleDetail" data-id="{{item.id}}"  data-everyIndex="{{index}}"></image>
                            <view style="float:rigth;width:430rpx;height:180rpx;position:relative;">
                                <text class='nowrapTwo' style="margin-left:20rpx;display:inline-block" bindtap="handleDetail" data-id="{{item.id}}" data-everyIndex="{{index}}">{{item.title}}</text>
                                
                                    <view style="background:#ffffff;width:430rpx;position:absolute;bottom:-30rpx;" hover-class="">
                                        <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                            <button  wx:if="{{item.wxmpVoiceIds.length>0}}"  style='float:left;background:#fff;margin-right:-20rpx' form-type="submit" class='btnListen'  data-tabList="{{currentTabIndex}}" 
                                            form-type="submit" bindtap="handleListing"  data-id="{{item.id}}" data-index="{{index}}" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}">
                                                    <image class="imgBtnItem" src="{{listenIndexCurrent==index && listening?'/images/pausing.png':'/images/playing.png'}}"></image>
                                                    <text wx:if="{{listenIndexCurrent==index && listening}}" style="{{listenIndexCurrent==index && listening?'color:#fff;background:#333;':'color:#999;background:#ffe000;'}};font-size:24rpx;border-radius:6rpx;margin-left:10rpx;padding:4rpx 6rpx;display:inline-block;line-height:12rpx;height: 100rpx;height:30rpx">
                                                        暂停
                                                    </text>
                                                    <text wx:else style="{{listenIndexCurrent==index && listening?'color:#fff;background:#333;':'color:#999;background:#ffe000;'}}font-size:24rpx;border-radius:6rpx;margin-left:10rpx;padding:4rpx 6rpx;display:inline-block;line-height:12rpx;height: 100rpx;height:30rpx">
                                                        听文章
                                                    </text>
                                                </button>
                                           

                                            
                                            <button wx:else class='btnListen' style='float:left;background:#fff;margin-right:-20rpx' form-type="submit" class='btnListen' form-type="submit" data-liked="{{item.liked}}" data-id="{{item.id}}" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}">
                                                   
                                                </button>
                                           
                                        </form>
                                        <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                        <button  form-type="submit" style='float:right;background:#fff;margin-right:-20rpx' open-type="{{type1}}" data-item="share" form-type="submit" bindgetuserinfo="handleAuthor">
                                            <image class="imgBtnItem" src="/images/mini_share.gif"></image>
                                        </button>
                                        </form>
                                        <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                        <button form-type="submit" style='float:right;background:#fff' catchtap="handleLikeButtonTapped" form-type="submit" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}">
                                            <image class="imgBtnItem" src="{{item.liked?'/images/mini_star.gif':'/images/star.png'}}"></image>
                                            <text style="color:#999;font-size:24rpx;padding-left:10rpx;display:inline-block;line-height:12rpx;">
                                                {{item._likedTimes}}
                                            </text>
                                        </button>
                                        </form>
                                    </view>
                            </view>
                        </view>
                    </view>
                </view>
                <view wx:else>
                    <view class="itemBigBox">
                        <!-- 大的图片的文章 -->
                        <view>
                            <view bindtap="handleDetail" data-id="{{item.id}}" data-everyIndex="{{index}}">
                                <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                    <button form-type="submit" hover-class='none' style="position:relative;padding:0;height:400rpx;border-radius:8rpx 8rpx 0 0">
                                        <!-- <view style="position:relative"> -->
                                        <image style="width:690rpx;height:400rpx;display:block" mode="aspectFill" src="{{item.coverUrl}}"></image>
                                        <view class="fontShadow" style="position:absolute;z-index:1;bottom:0;left:0;color:#fff">
                                            <view class='nowrapOne' style="margin-left:20rpx;line-height:100rpx;text-align:left">
                                                {{item.title}}
                                            </view>
                                        </view>
                                        <!-- </view> -->
                                    </button>
                                </form>
                            </view>
                            <view style="background:#ffffff;height:100rpx;width:690rpx;">
                                <view class="videoTitle" data-id="{{item.id}}"></view>
                                <view data-id="{{item.id}}" style="">
                                    <!-- <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'> -->
                                        <!-- <button style="background:#ffffff;" hover-class=""> -->
                                        <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                            <button wx:if="{{item.wxmpVoiceIds.length>0}}" form-type="submit" class='btnListen'
                                            form-type="submit" bindtap="handleListing"  data-id="{{item.id}}" data-index="{{index}}" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}"  data-tabList="{{currentTabIndex}}" >
                                                    <image class="imgBtnItem" src="{{listenIndexCurrent==index && listening?'/images/mini.gif':'/images/playing.png'}}"></image>
                                                    <text wx:if="{{listenIndexCurrent==index && listening}}" style="{{listenIndexCurrent==index && listening?'color:#fff;background:#333;':'color:#999;background:#ffe000;'}};font-size:24rpx;border-radius:6rpx;margin-left:10rpx;padding:4rpx 6rpx;display:inline-block;line-height:12rpx;height: 100rpx;height:30rpx">
                                                        暂停
                                                    </text>
                                                    <text wx:else style="{{listenIndexCurrent==index && listening?'color:#fff;background:#333;':'color:#999;background:#ffe000;'}}font-size:24rpx;border-radius:6rpx;margin-left:10rpx;padding:4rpx 6rpx;display:inline-block;line-height:12rpx;height: 100rpx;height:30rpx">
                                                        听文章
                                                    </text>
                                                </button>
                                           

                                            
                                            <button wx:else form-type="submit" class='btnListen' form-type="submit" data-liked="{{item.liked}}" data-id="{{item.id}}" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}">
                                                    <!-- <image class="imgBtnItem" src="{{item.liked?'/images/allStar.png':'/images/star.png'}}"></image>
                                                    <text style="color:#999;font-size:24rpx;padding-left:10rpx;display:inline-block;line-height:12rpx;height: 100rpx;">
                                                        没有文章听
                                                    </text> -->
                                                </button>
                                           
                                        </form>
                                           <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                            <button form-type="submit" class='btnStar' catchtap="handleLikeButtonTapped" form-type="submit" data-liked="{{item.liked}}" data-id="{{item.id}}" data-item="{{item}}" bindgetuserinfo="handleAuthor" open-type="{{type}}">
                                                    <image class="imgBtnItem" src="{{item.liked?'/images/mini_star.gif':'/images/star.png'}}"></image>
                                                    <text style="color:#999;font-size:24rpx;padding-left:10rpx;display:inline-block;line-height:12rpx;height: 100rpx;">
                                                        {{item._likedTimes}}
                                                    </text>
                                                </button>
                                            </form>
                                            <form name='pushMsgFm' report-submit='true' bindsubmit='getFormID'>
                                                <button form-type="submit" class='btnShare' data-item="share" open-type="{{type1}}" form-type="submit" bindgetuserinfo="handleAuthor">
                                                    <image class="imgBtnItem" src="/images/mini_share.gif"></image>
                                                </button>
                                            </form>
                                        <!-- </button> -->
                                    <!-- </form> -->
                                </view>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </view>
        </view>
        <view wx:if="{{isMore}}" style="width:100%; height:60rpx;font-size: 28rpx;text-align: center;line-height: 60rpx;"></view>
        <view wx:else style="width:100%; height:200rpx;font-size: 28rpx;text-align: center;line-height: 200rpx;">
            <view style='height:50rpx;'>
                <image src="/images/logo.png" style="width:32rpx;height:32rpx;margin-right: 16rpx"></image>
                由小鱼聚合平台提供技术支持
            </view>
            <view style="text-align:center;dispaly:block">产品意见反馈请添加微信：13264256564</view>
        </view>
    </block>
    <block wx:else>
        <view style="width: 100%;height: 1000rpx;"></view>
        <view wx:if="{{isMore}}" style="width:100%; height:60rpx;font-size: 28rpx;text-align: center;line-height: 60rpx;position: fixed;bottom: -800rpx"></view>
        <view wx:else style="width:100%; height:200rpx;font-size: 28rpx;text-align: center;line-height: 200rpx;">
            <view style='height:50rpx;'>
                <image src="/images/logo.png" style="width:32rpx;height:32rpx;margin-right: 16rpx"></image>
                由小鱼聚合平台提供技术支持
            </view>
            <view style="text-align:center;dispaly:block">产品意见反馈请添加微信：13264256564</view>
        </view>
    </block>
</template>